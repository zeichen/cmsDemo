<!doctype html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>Integration with dhtmlxTree</title>

	   <link href="vendor/bootstrap/simple-sidebar.css" rel="stylesheet">
    <script src="vendor/codebase/dhtmlxscheduler.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="vendor/codebase/dhtmlxlist.css"/>
    <script src="vendor/codebase/dhtmlxlist.js"></script>
    <script src='vendor/codebase/ext/dhtmlxscheduler_outerdrag.js' type="text/javascript"></script>
    <link rel="stylesheet" href="vendor/codebase/dhtmlxscheduler_flat.css" type="text/css" media="screen" title="no title"
          charset="utf-8">

<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script src='vendor/codebase/dhtmlxtree.js' type="text/javascript" charset="utf-8"></script>
	<link rel='stylesheet' type='text/css' href='vendor/codebase/dhtmlxtree.css'>



	<style type="text/css" media="screen">
		html, body {
			margin: 0px;
			padding: 0px;
			height: 100%;
			overflow: hidden;
		}

		#scheduler_here {
			background-color: white;
			border-left: 1px solid #EBE9E9;
			border-right: 1px solid #EBE9E9;
		}

	</style>

	<script type="text/javascript" charset="utf-8">
	var myList;
		function init() {
			
var tree = new dhtmlXTreeObject("treebox", "100%", "100%", 0);
			tree.enableDragAndDrop(true);
			tree.setSkin("dhx_terrace");
			tree.attachEvent("onDrag", function() { return false; });
			tree.loadXML("data.xml");

			  myList = new dhtmlXList({
                container:"data_container1",
                type:{
                    template:"#Package# : #Version#<br/>#Maintainer#",
                    height:40
                },
                drag:true
            });
			  myList2 = new dhtmlXList({
				container:"data_container2",
				type:{
					template:"<span class='dhx_strong'>#Maintainer#</span>#Package# <span class='dhx_light'>#Version#</span>",
					height:55
				},
				drag:true
			});
			myList2.add({
				Package:"Drop here",
				Version:"0.1",
				Maintainer:"dhtmlx"
			});
            myList.attachEvent("onBeforeDrag",function(context,e){
            //  context.html = "<div style='background-color:white; font-family:Tahoma; padding:10px;'>Drag "+context.source.length+" item(s)</div>";
                return true;
            });
            myList.add({
                Package:"drag this",
                Version:"0.1",
                Maintainer:"dhtmlx"
            });
            myList.add({
                Package:"drag this",
                Version:"0.2",
                Maintainer:"dhtmlx"
            });
            myList.add({
                Package:"drag this",
                Version:"0.3",
                Maintainer:"dhtmlx"
            });
            myList.add({
                Package:"drag this",
                Version:"0.4",
                Maintainer:"dhtmlx"
            });

			//key point!
			//convert data from tree in property of event
			//similar approach can be used for any other dhtmlx component
			scheduler.attachEvent("onExternalDragIn", function(id, source, e) {
				var label = tree.getItemText(tree._dragged[0].id);
				scheduler.getEvent(id).text = label;
				return true;
			});

			 scheduler.config.xml_date = "%Y-%m-%d %H:%i";
    scheduler.init('scheduler_here', new Date(), "month");

    scheduler.templates.xml_date = function (value) {
        return new Date(value);
    };
$("#draggable").draggable({ revert: true });
		}


	</script>
</head>

<body onload="init();">

 <div id="treebox" style="position:absolute; top:0px; left:0px; width:250px; height:100%;">
 	
 	<table border="0" cellspacing="5" cellpadding="5">
        <tr>
            <td>
                <div id="data_container1" style={{border: '1px solid #A4BED4', backgroundColor: 'white', width:250, height:800}} />
            </td>
             <td>
                <div id="data_container2" style={{border: '1px solid #A4BED4', backgroundColor: 'white', width:250, height:800}} />
            </td>
        </tr>
    </table>
   <div id="draggable" style="background-color:red;width:20%;height:20%;float:left;padding:5px;overflow:hidden;"></div>
 </div>

   
<div id="scheduler_here" class="dhx_cal_container"
     style='width:1000px; height:100%; position:absolute; top:0px; left:250px'>
	<div class="dhx_cal_navline">
		<div class="dhx_cal_prev_button">&nbsp;</div>
		<div class="dhx_cal_next_button">&nbsp;</div>
		<div class="dhx_cal_today_button"></div>
		<div class="dhx_cal_date"></div>
		<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>
		<div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>
		<div class="dhx_cal_tab" name="timeline_tab" style="right:280px;"></div>
		<div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>
	</div>
	<div class="dhx_cal_header">
	</div>
	<div class="dhx_cal_data">
	</div>
</div>
</body>